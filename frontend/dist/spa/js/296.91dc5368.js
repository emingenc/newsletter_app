"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[296],{1462:(e,t,a)=>{a.d(t,{t:()=>u});a(2100);var l=a(321),n=a(3673);const o="authState",s={user:{}},r=()=>null!==localStorage.getItem(o)?JSON.parse(localStorage.getItem(o)):s,u=(0,l.Q_)(o,{state:r,getters:{},mutations:{},actions:{}});(0,n.YP)((()=>u()),(()=>{localStorage.setItem(o,JSON.stringify(u()))}),{deep:!0})},5296:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var l=a(3673),n=a(1959),o=a(1462),s=a(5474),r=a(9582);const u={class:"text-h5 q-mt-sm q-mb-xs"},c={class:"text-caption text-grey"},i={class:"flex flex-center"},p={setup(e){const t=(0,r.tv)(),a=(0,o.t)();a.user.access||t.push("/login");let p=(0,n.iH)(`Bearer ${a.user.access}`);s.api.get("auth/me",{headers:{Authorization:p.value,accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((e=>{})).catch((e=>{let t=a.user.refresh;s.api.get("auth/token/refresh",{headers:{Authorization:`Bearer ${t}`}}).then((e=>{a.user.access=e.data.access,p.value=`Bearer ${e.data.access}`})).catch((e=>{console.log(e)}))}));let d=(0,n.iH)(""),m=(0,n.iH)(""),h=(0,n.iH)(null);const f=e=>{e.preventDefault();let a=new FormData;a.append("title",d.value),a.append("news",m.value),a.append("photo",h.value,h.value.name,h.value.type),s.api.post("newsletters",a,{headers:{Authorization:p.value,accept:"application/json","Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}}).then((e=>{t.push("/newsletter/"+e.data.id)})).catch((e=>{console.log(e)}))};return(e,t)=>{const a=(0,l.up)("q-btn"),o=(0,l.up)("q-file"),s=(0,l.up)("q-input"),r=(0,l.up)("q-form"),p=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(a,{class:"q-pa-xl",size:"xl",flat:"",icon:"arrow_back",to:"/"}),(0,l.Wm)(p,{class:"collumn q-pa-xl",flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{onSubmit:f,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(o,{name:"newsletter_photo",modelValue:(0,n.SU)(h),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.dq)(h)?h.value=e:h=e),filled:"",label:"Select newsletter image"},null,8,["modelValue"])]),(0,l._)("div",u,[(0,l.Wm)(s,{modelValue:(0,n.SU)(d),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,n.dq)(d)?d.value=e:d=e),label:"Title",clearable:""},null,8,["modelValue"])]),(0,l._)("div",c,[(0,l.Wm)(s,{modelValue:(0,n.SU)(m),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,n.dq)(m)?m.value=e:m=e),filled:"",type:"textarea",label:"Newsletter content"},null,8,["modelValue"])]),(0,l._)("div",i,[(0,l.Wm)(a,{label:"Add Newsletter",type:"submit",color:"primary"})])])),_:1})])),_:1})],64)}}};var d=a(3351),m=a(151),h=a(8689),f=a(6239),v=a(2426),g=a(7518),w=a.n(g);const b=p,q=b;w()(p,"components",{QBtn:d.Z,QCard:m.Z,QForm:h.Z,QFile:f.Z,QInput:v.Z})}}]);